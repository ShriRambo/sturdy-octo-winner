<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>AdGuardhome Setup</title>
<meta name="generator" content="Org mode">
<link rel='stylesheet' href='./css/code.css' />
<link rel='stylesheet' href='./css/simple.css' />
<link rel='shortcut icon' href='./img/favicon.ico' type='image/x-icon' />
<link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css' integrity='sha256-XoaMnoYC5TH6/+ihMEnospgm0J1PM/nioxbOUdnM8HY=' crossorigin='anonymous'>
</head>
<body>
<header id="top" class="status">
<a href="./index.html">shrirambo</a>.<a href="https://github.com/shrirambo">github</a>.<a href="">io</a>/<a href="./index.html">home</a>/<a href="./index.html">blog</a>
</header>
<main id="content">
<h1 class="title">AdGuardhome Setup</h1>
<hr>
<p>
Adguard home is a software that blocks ads and trackers over your complete network. And for it to work, no client side apps are required at all. Adguard achieves this by acting as a dns server and redirects all the requests to domains, which are known to be ad servers or trackers, to black hole. We can also add our own list of domain names or from a publicaly maintained list of trackers. 
</p>

<section id="outline-container-org7e4a16f" class="outline-2">
<h2 id="org7e4a16f"><a href="#org7e4a16f">Docker compose file</a></h2>
<div class="outline-text-2" id="text-org7e4a16f">
<p>
Here is my docker compose file.
</p>

<div class="org-src-container">
<pre class="src src-yaml">version: "2"
services:
  adguardhome:
    image: adguard/adguardhome
    container_name: adguardhome
    ports:
      - 53:53/tcp
      - 53:53/udp
      - 67:67/udp
      - 68:68/tcp
      - 68:68/udp
      - 853:853/tcp
      - 3000:3000/tcp
    environment:
      - USER_ID=998
      - GROUP_ID=100
      - TZ=Europe/Amsterdam
    volumes:
      - /mnt/local/appdata/adguard/work:/opt/adguardhome/work
      - /mnt/local/appdata/adguard/conf:/opt/adguardhome/conf
    restart: unless-stopped
</pre>
</div>

<p>
There are many ports exposed by the container and many of them are to be mapped to the same port on server. Here is what those ports are used for:
</p>
<dl class="org-dl">
<dt>53 (tcp/udp)</dt><dd>Used by DNS service for domain name resolutoin</dd>
<dt>67 (udp)</dt><dd>Bootstrap protocol server. Used by DHCP servers to communicate addressing information to remote DHCP clients. Cool stuff, we can use Adguard to act as DHCP server as well.</dd>
<dt>68 (tcp/udp)</dt><dd>Bootstrap protocol client. Used by client machines to obtain dynamic IP addressing information from a DHCP server.</dd>
</dl>
<p>
<b>Note</b>: This port can be used by the host machine if static IP is not configured. And the docker container will not start as the port cannot be mapped
</p>
<dl class="org-dl">
<dt>853 (tcp) </dt><dd>DNS over TLS. A bit more secured.</dd>
<dt>3000 (tcp)</dt><dd>AdGuard Home web interface.</dd>
</dl>
</div>
</section>
</main>
<footer id="postamble" class="status">
<hr>
<section>
<script src="https://giscus.app/client.js" 
  data-repo="ShriRambo/giscus-comments"
  data-repo-id="R_kgDOG1mtrQ"
  data-category="Announcements" 
  data-category-id="DIC_kwDOG1mtrc4CBJNW" 
  data-mapping="title" 
  data-reactions-enabled="1" 
  data-emit-metadata="0" 
  data-input-position="top" 
  data-theme="dark" 
  data-lang="en" 
  crossorigin="anonymous" 
  async> </script>
</section>
<hr>
<section>
  <p style="text-align:center">
Made with ❤️ and Emacs (Org-mode)
</p>
<div align=center>
  <a href="#" class='link-icon'>
    <i class="fa fa-home fa-lg" aria-hidden="true"></i>
  </a>
  <a href="https://www.instagram.com/shrirambo/" class='link-icon'>
    <i class="fa fa-instagram fa-lg" aria-hidden="true"></i>
  </a>
  <a href="https://github.com/shrirambo" class='link-icon'>
    <i class="fa fa-github fa-lg" aria-hidden="true"></i>
  </a>
  <a href='https://www.linkedin.com/in/shriram-ashirgade/' class='link-icon'>
    <i class="fa fa-linkedin-square fa-lg" aria-hidden="true"></i>
  </a>
  <a href='https://social.vivaldi.net/@shrirambo'>
    <i class="fa fa-mastodon fa-lg" aria-hidden="true"></i>
  </a>
  <a href='https://github.com/ShriRambo/sturdy-octo-winner/tree/master/content' class='link-icon'>
    <i class="fa fa-code  fa-lg" aria-hidden="true"></i>
  </a>
  <a href='#content' class='link-icon'>
    <i class="fa fa-hand-o-up  fa-lg" aria-hidden="true"></i>
  </a>
</div>
</div>
</footer>
</body>
</html>
